/*! Built with http://stenciljs.com */
const{h:t,Context:e}=window.App;class n{render(){return t("div",null,t("main",null,t("stencil-router",null,t("stencil-route",{url:"/",component:"app-home",exact:!0}),t("stencil-route",{url:"/profile/:name",component:"app-profile"}))))}static get is(){return"my-app"}static get style(){return"my-app{display:block;height:100vh}"}}var o="/",r="./",i=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function s(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function a(t){return t.replace(/([=!:$/()])/g,"\\$1")}function c(t){return t&&t.sensitive?"":"i"}function h(t,e,n){return t instanceof RegExp?function(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var o=0;o<n.length;o++)e.push({name:o,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,n){for(var o=[],r=0;r<t.length;r++)o.push(h(t[r],e,n).source);return new RegExp("(?:"+o.join("|")+")",c(n))}(t,e,n):function(t,e,n){return function(t,e,n){for(var i=(n=n||{}).strict,a=!1!==n.end,h=s(n.delimiter||o),l=n.delimiters||r,u=[].concat(n.endsWith||[]).map(s).concat("$").join("|"),p="",d=!1,f=0;f<t.length;f++){var g=t[f];if("string"==typeof g)p+=s(g),d=f===t.length-1&&l.indexOf(g[g.length-1])>-1;else{var m=s(g.prefix),y=g.repeat?"(?:"+g.pattern+")(?:"+m+"(?:"+g.pattern+"))*":g.pattern;e&&e.push(g),g.optional?g.partial?p+=m+"("+y+")?":p+="(?:"+m+"("+y+"))?":p+=m+"("+y+")"}}return a?(i||(p+="(?:"+h+")?"),p+="$"===u?"$":"(?="+u+")"):(i||(p+="(?:"+h+"(?="+u+"))?"),d||(p+="(?="+h+"|"+u+")")),new RegExp("^"+p,c(n))}(function(t,e){for(var n,c=[],h=0,l=0,u="",p=e&&e.delimiter||o,d=e&&e.delimiters||r,f=!1;null!==(n=i.exec(t));){var g=n[0],m=n[1],y=n.index;if(u+=t.slice(l,y),l=y+g.length,m)u+=m[1],f=!0;else{var w="",b=t[l],v=n[2],x=n[3],O=n[4],A=n[5];if(!f&&u.length){var R=u.length-1;d.indexOf(u[R])>-1&&(w=u[R],u=u.slice(0,R))}u&&(c.push(u),u="",f=!1);var P=""!==w&&void 0!==b&&b!==w,k="+"===A||"*"===A,E="?"===A||"*"===A,S=w||p,L=x||O;c.push({name:v||h++,prefix:w,delimiter:S,optional:E,repeat:k,partial:P,pattern:L?a(L):"[^"+s(S)+"]+?"})}}return(u||l<t.length)&&c.push(u+t.substr(l)),c}(t,n),e,n)}(t,e,n)}const l={},u=1e4;let p=0;class d{constructor(){this.unsubscribe=(()=>{}),this.componentProps={},this.exact=!1,this.group=null,this.groupIndex=null,this.routeRender=null,this.match=null}computeMatch(t){return t||(t=this.activeRouter.get("location").pathname),function(t,e={}){"string"==typeof e&&(e={path:e});const{path:n="/",exact:o=!1,strict:r=!1}=e,{re:i,keys:s}=function(t,e){const n=`${e.end}${e.strict}`,o=l[n]||(l[n]={}),r=JSON.stringify(t);if(o[r])return o[r];const i=[],s={re:h(t,i,e),keys:i};return p<u&&(o[r]=s,p+=1),s}(n,{end:o,strict:r}),a=i.exec(t);if(!a)return null;const[c,...d]=a,f=t===c;return o&&!f?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:f,params:s.reduce((t,e,n)=>(t[e.name]=d[n],t),{})}}(t,{path:this.url,exact:this.exact,strict:!0})}componentWillLoad(){this.unsubscribe=this.activeRouter.subscribe(t=>(this.match=t?null:this.computeMatch(),this.match),this.group,this.groupIndex),this.group||(this.match=this.computeMatch())}componentDidUnload(){this.unsubscribe()}render(){if(!this.activeRouter||!this.match)return null;const e=Object.assign({},this.componentProps,{history:this.activeRouter.get("history"),match:this.match});if(this.routeRender)return this.routeRender(Object.assign({},e,{component:this.component}));if(this.component){const n=this.component;return t(n,Object.assign({},e))}}static get is(){return"stencil-route"}static get properties(){return{activeRouter:{context:"activeRouter"},component:{type:String,attr:"component"},componentProps:{type:"Any",attr:"component-props"},exact:{type:Boolean,attr:"exact"},group:{type:String,attr:"group"},groupIndex:{type:Number,attr:"group-index"},location:{context:"location"},match:{state:!0},routeRender:{type:"Any",attr:"route-render"},url:{type:"Any",attr:"url"}}}}function f(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)}function g(t,e){return f(t,e)?t.substr(e.length):t}function m(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function y(t){return"/"===t.charAt(0)?t:"/"+t}function w(t){return"/"===t.charAt(0)?t.substr(1):t}function b(t){const{pathname:e,search:n,hash:o}=t;let r=e||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:`?${n}`),o&&"#"!==o&&(r+="#"===o.charAt(0)?o:`#${o}`),r}function v(t){return"/"===t.charAt(0)}function x(t,e){for(let n=e,o=n+1,r=t.length;o<r;n+=1,o+=1)t[n]=t[o];t.pop()}function O(t,e,n,o){let r;"string"==typeof t?(r=function(t){let e=t||"/",n="",o="";const r=e.indexOf("#");-1!==r&&(o=e.substr(r),e=e.substr(0,r));const i=e.indexOf("?");return-1!==i&&(n=e.substr(i),e=e.substr(0,i)),{pathname:e,search:"?"===n?"":n,hash:"#"===o?"":o}}(t)).state=e:(void 0===(r=Object.assign({},t)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==e&&void 0===r.state&&(r.state=e));try{r.pathname=decodeURI(r.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}var i;return n&&(r.key=n),o?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=function(t,e=""){const n=t&&t.split("/")||[];let o=e&&e.split("/")||[];const r=t&&v(t),i=e&&v(e),s=r||i;if(t&&v(t)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";let a;if(o.length){const t=o[o.length-1];a="."===t||".."===t||""===t}else a=!1;let c=0;for(let t=o.length;t>=0;t--){const e=o[t];"."===e?x(o,t):".."===e?(x(o,t),c++):c&&(x(o,t),c--)}if(!s)for(;c--;c)o.unshift("..");!s||""===o[0]||o[0]&&v(o[0])||o.unshift("");let h=o.join("/");return a&&"/"!==h.substr(-1)&&(h+="/"),h}(r.pathname,o.pathname)):r.pathname=o.pathname:r.pathname||(r.pathname="/"),r.query=(i=r.search)?(/^[?#]/.test(i)?i.slice(1):i).split("&").reduce((t,e)=>{let[n,o]=e.split("=");return t[n]=o?decodeURIComponent(o.replace(/\+/g," ")):"",t},{}):{},r}function A(t,...e){t||console.error(...e)}function R(t,...e){t||console.warn(...e)}const P=()=>{let t,e=[];return{setPrompt:e=>(R(null==t,"A history supports only one prompt at a time"),t=e,()=>{t===e&&(t=null)}),confirmTransitionTo:(e,n,o,r)=>{if(null!=t){const i="function"==typeof t?t(e,n):t;"string"==typeof i?"function"==typeof o?o(i,r):(R(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==i)}else r(!0)},appendListener:t=>{let n=!0;const o=(...e)=>{n&&t(...e)};return e.push(o),()=>{n=!1,e=e.filter(t=>t!==o)}},notifyListeners:(...t)=>{e.forEach(e=>e(...t))}}},k=!("undefined"==typeof window||!window.document||!window.document.createElement),E=(t,e,n)=>t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n),S=(t,e,n)=>t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n),L=(t,e)=>e(window.confirm(t)),T=()=>{try{return window.history.state||{}}catch(t){return{}}},j={hashbang:{encodePath:t=>"!"===t.charAt(0)?t:"!/"+w(t),decodePath:t=>"!"===t.charAt(0)?t.substr(1):t},noslash:{encodePath:w,decodePath:y},slash:{encodePath:y,decodePath:y}},U=()=>{const t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},C=t=>{const e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)},H={browser:(t={})=>{A(k,"Browser history needs a DOM");const e=window.history,n=(()=>{const t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history})(),o=!(()=>-1===window.navigator.userAgent.indexOf("Trident"))(),{forceRefresh:r=!1,getUserConfirmation:i=L,keyLength:s=6}=t,a=t.basename?m(y(t.basename)):"",c=t=>{t=t||{};const{key:e,state:n}=t,{pathname:o,search:r,hash:i}=window.location;let s=o+r+i;return R(!a||f(s,a),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+s+'" to begin with "'+a+'".'),a&&(s=g(s,a)),O(s,n,e)},h=()=>Math.random().toString(36).substr(2,s),l=P(),u=t=>{Object.assign(B,t),B.length=e.length,l.notifyListeners(B.location,B.action)},p=t=>{(t=>void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS"))(t)||v(c(t.state))},d=()=>{v(c(T()))};let w=!1;const v=t=>{if(w)w=!1,u();else{const e="POP";l.confirmTransitionTo(t,e,i,n=>{n?u({action:e,location:t}):x(t)})}},x=t=>{const e=B.location;let n=U.indexOf(e.key);-1===n&&(n=0);let o=U.indexOf(t.key);-1===o&&(o=0);const r=n-o;r&&(w=!0,H(r))},j=c(T());let U=[j.key];const C=t=>a+b(t),H=t=>{e.go(t)};let M=0;const $=t=>{1===(M+=t)?(E(window,"popstate",p),o&&E(window,"hashchange",d)):0===M&&(S(window,"popstate",p),o&&S(window,"hashchange",d))};let I=!1;const B={length:e.length,action:"POP",location:j,createHref:C,push:(t,o)=>{R(!("object"==typeof t&&void 0!==t.state&&void 0!==o),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");const s=O(t,o,h(),B.location);l.confirmTransitionTo(s,"PUSH",i,t=>{if(!t)return;const o=C(s),{key:i,state:a}=s;if(n)if(e.pushState({key:i,state:a},null,o),r)window.location.href=o;else{const t=U.indexOf(B.location.key),e=U.slice(0,-1===t?0:t+1);e.push(s.key),U=e,u({action:"PUSH",location:s})}else R(void 0===a,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=o})},replace:(t,o)=>{R(!("object"==typeof t&&void 0!==t.state&&void 0!==o),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");const s=O(t,o,h(),B.location);l.confirmTransitionTo(s,"REPLACE",i,t=>{if(!t)return;const o=C(s),{key:i,state:a}=s;if(n)if(e.replaceState({key:i,state:a},null,o),r)window.location.replace(o);else{const t=U.indexOf(B.location.key);-1!==t&&(U[t]=s.key),u({action:"REPLACE",location:s})}else R(void 0===a,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(o)})},go:H,goBack:()=>H(-1),goForward:()=>H(1),block:(t="")=>{const e=l.setPrompt(t);return I||($(1),I=!0),()=>(I&&(I=!1,$(-1)),e())},listen:t=>{const e=l.appendListener(t);return $(1),()=>{$(-1),e()}}};return B},hash:(t={})=>{A(k,"Hash history needs a DOM");const e=window.history,n=(()=>-1===window.navigator.userAgent.indexOf("Firefox"))(),{getUserConfirmation:o=L,hashType:r="slash"}=t,i=t.basename?m(y(t.basename)):"",{encodePath:s,decodePath:a}=j[r],c=()=>{let t=a(U());return R(!i||f(t,i),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+i+'".'),i&&(t=g(t,i)),O(t)},h=P(),l=t=>{Object.assign(F,t),F.length=e.length,h.notifyListeners(F.location,F.action)};let u=!1,p=null;const d=()=>{const t=U(),e=s(t);if(t!==e)C(e);else{const t=c(),e=F.location;if(!u&&($=t,(M=e).pathname===$.pathname&&M.search===$.search&&M.hash===$.hash&&M.key===$.key&&function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every(function(e,o){return t(e,n[o])});const o=typeof e;if(o!==typeof n)return!1;if("object"===o){const o=e.valueOf(),r=n.valueOf();if(o!==e||r!==n)return t(o,r);const i=Object.keys(e),s=Object.keys(n);return i.length===s.length&&i.every(function(o){return t(e[o],n[o])})}return!1}(M.state,$.state)))return;if(p===b(t))return;p=null,w(t)}},w=t=>{if(u)u=!1,l();else{const e="POP";h.confirmTransitionTo(t,e,o,n=>{n?l({action:e,location:t}):v(t)})}},v=t=>{const e=F.location;let n=I.lastIndexOf(b(e));-1===n&&(n=0);let o=I.lastIndexOf(b(t));-1===o&&(o=0);const r=n-o;r&&(u=!0,B(r))},x=U(),T=s(x);x!==T&&C(T);const H=c();let I=[b(H)];const B=t=>{R(n,"Hash history go(n) causes a full page reload in this browser"),e.go(t)};let D=0;const W=t=>{1===(D+=t)?E(window,"hashchange",d):0===D&&S(window,"hashchange",d)};let Y=!1;const F={length:e.length,action:"POP",location:H,createHref:t=>"#"+s(i+b(t)),push:(t,e)=>{R(void 0===e,"Hash history cannot push state; it is ignored");const n=O(t,void 0,void 0,F.location);h.confirmTransitionTo(n,"PUSH",o,t=>{if(!t)return;const e=b(n),o=s(i+e);if(U()!==o){p=e,(t=>window.location.hash=t)(o);const t=I.lastIndexOf(b(F.location)),r=I.slice(0,-1===t?0:t+1);r.push(e),I=r,l({action:"PUSH",location:n})}else R(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),l()})},replace:(t,e)=>{R(void 0===e,"Hash history cannot replace state; it is ignored");const n=O(t,void 0,void 0,F.location);h.confirmTransitionTo(n,"REPLACE",o,t=>{if(!t)return;const e=b(n),o=s(i+e);U()!==o&&(p=e,C(o));const r=I.indexOf(b(F.location));-1!==r&&(I[r]=e),l({action:"REPLACE",location:n})})},go:B,goBack:()=>B(-1),goForward:()=>B(1),block:(t="")=>{const e=h.setPrompt(t);return Y||(W(1),Y=!0),()=>(Y&&(Y=!1,W(-1)),e())},listen:t=>{const e=h.appendListener(t);return W(1),()=>{W(-1),e()}}};return F}};var M,$;class I{constructor(){this.root="/",this.historyType="browser",this.titleSuffix="",this.unsubscribe=(()=>{}),this.match=null}titleSuffixChanged(t){this.activeRouter.set({titleSuffix:t})}computeMatch(t){return{path:this.root,url:this.root,isExact:t===this.root,params:{}}}componentWillLoad(){const t=H[this.historyType]();t.listen(t=>{this.activeRouter.set({location:this.getLocation(t)})}),this.activeRouter.set({location:this.getLocation(t.location),titleSuffix:this.titleSuffix,root:this.root,history:t}),this.unsubscribe=this.activeRouter.subscribe(()=>{this.match=this.computeMatch()}),this.match=this.computeMatch()}getLocation(t){const e=0==t.pathname.indexOf(this.root)?"/"+t.pathname.slice(this.root.length):t.pathname;return Object.assign({},t,{pathname:e})}componentDidUnload(){this.unsubscribe()}render(){return t("slot",null)}static get is(){return"stencil-router"}static get properties(){return{activeRouter:{context:"activeRouter"},historyType:{type:"Any",attr:"history-type"},match:{state:!0},root:{type:String,attr:"root"},titleSuffix:{type:String,attr:"title-suffix",watchCallbacks:["titleSuffixChanged"]}}}}export{n as MyApp,d as StencilRoute,I as StencilRouter};